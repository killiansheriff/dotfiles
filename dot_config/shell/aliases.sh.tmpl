# ╔══════════════════════════════════════════════════════════════════════════╗
# ║                              SHELL ALIASES                                ║
# ╚══════════════════════════════════════════════════════════════════════════╝
# Managed by chezmoi - edit source at ~/.local/share/chezmoi

# ─────────────────────────────────────────────────────────────────────────────
# Navigation
# ─────────────────────────────────────────────────────────────────────────────
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias ~="cd ~"

# ─────────────────────────────────────────────────────────────────────────────
# Listing (use eza if available, fallback to ls with Nord colors)
# ─────────────────────────────────────────────────────────────────────────────
if command -v eza &> /dev/null; then
    # Add --icons if you have a Nerd Font installed
    alias ls="eza --group-directories-first"
    alias ll="eza -la --group-directories-first --git"
    alias lt="eza --tree --level=2"
    alias la="eza -a"
elif command -v gls &> /dev/null; then
    # macOS with GNU coreutils (brew install coreutils)
    alias ls="gls --color=auto"
    alias ll="gls -lah --color=auto"
    alias la="gls -A --color=auto"
else
    # Fallback: BSD ls (macOS) or GNU ls (Linux)
{{ if eq .chezmoi.os "darwin" -}}
    alias ls="ls -G"
    alias ll="ls -lahG"
    alias la="ls -AG"
{{ else -}}
    alias ls="ls --color=auto"
    alias ll="ls -lah --color=auto"
    alias la="ls -A --color=auto"
{{ end -}}
fi

# ─────────────────────────────────────────────────────────────────────────────
# Git shortcuts
# ─────────────────────────────────────────────────────────────────────────────
alias g="git"
alias gs="git status"
alias ga="git add"
alias gc="git commit"
alias gp="git push"
alias gl="git pull"
alias gd="git diff"
alias gco="git checkout"
alias gb="git branch"
alias glog="git log --oneline --graph --decorate"

# ─────────────────────────────────────────────────────────────────────────────
# Safety nets
# ─────────────────────────────────────────────────────────────────────────────
alias rm="rm -i"
alias mv="mv -i"
alias cp="cp -i"

# ─────────────────────────────────────────────────────────────────────────────
# Chezmoi shortcuts
# ─────────────────────────────────────────────────────────────────────────────
alias cz="chezmoi"
alias cze="chezmoi edit"
alias czd="chezmoi diff"
alias cza="chezmoi apply"
alias czcd="cd ~/.local/share/chezmoi"

# ─────────────────────────────────────────────────────────────────────────────
# SSH connections
# ─────────────────────────────────────────────────────────────────────────────
# SSH aliases are in ~/.config/shell/local.sh (private, not version controlled)
# Example: alias myserver="ssh user@server.example.com"

# ─────────────────────────────────────────────────────────────────────────────
# Slurm (HPC job scheduler) - with colors and formatting
# ─────────────────────────────────────────────────────────────────────────────
# Colored squeue output
alias sq='squeue -u $USER -o "%.8i %.9P %.25j %.8u %.2t %.10M %.6D %.4C %.10m %R" | awk '\''
    NR==1 {print "\033[1;37m" $0 "\033[0m"; next}
    /RUNNING|R / {print "\033[1;32m" $0 "\033[0m"; next}
    /PENDING|PD/ {print "\033[1;33m" $0 "\033[0m"; next}
    /FAILED|F / {print "\033[1;31m" $0 "\033[0m"; next}
    /COMPLETED|CD/ {print "\033[1;36m" $0 "\033[0m"; next}
    /CANCELLED|CA/ {print "\033[1;35m" $0 "\033[0m"; next}
    {print $0}
'\'''
alias sqa='squeue -o "%.8i %.9P %.20j %.8u %.2t %.10M %.6D %R"'
alias sqw='watch -n 5 -c "squeue -u $USER -o \"%.8i %.9P %.25j %.8u %.2t %.10M %.6D %.4C %.10m %R\""'
alias si="sinfo"
alias sip="sinfo -p"
alias sc="scancel"
alias sca="scancel -u $USER"
alias sjob="sacct -j"
alias seff="seff"
alias smy='sacct -u $USER --format=JobID,JobName%20,Partition,State,ExitCode,Elapsed,MaxRSS'

# ─────────────────────────────────────────────────────────────────────────────
# Utilities
# ─────────────────────────────────────────────────────────────────────────────
# Reload shell config (works for both bash and zsh)
if [[ -n "$ZSH_VERSION" ]]; then
    alias reload="source ~/.zshrc"
elif [[ -n "$BASH_VERSION" ]]; then
    alias reload="source ~/.bashrc"
fi
alias path='echo -e ${PATH//:/\\n}'
alias now="date '+%Y-%m-%d %H:%M:%S'"
alias week="date +%V"
alias myip="curl -s ifconfig.me"

# ─────────────────────────────────────────────────────────────────────────────
# Modern CLI replacements (use better tools if available)
# ─────────────────────────────────────────────────────────────────────────────
# bat → cat (syntax highlighting)
if command -v bat &> /dev/null; then
    alias cat="bat --paging=never"
elif command -v batcat &> /dev/null; then
    # Debian/Ubuntu installs bat as batcat
    alias cat="batcat --paging=never"
    alias bat="batcat"
fi

# ripgrep → grep (faster, respects .gitignore)
if command -v rg &> /dev/null; then
    alias grep="rg"
fi

# fd → find (faster, friendlier syntax)
if command -v fd &> /dev/null; then
    alias find="fd"
elif command -v fdfind &> /dev/null; then
    # Debian/Ubuntu installs fd as fdfind
    alias find="fdfind"
    alias fd="fdfind"
fi

# ─────────────────────────────────────────────────────────────────────────────
# OS-specific aliases
# ─────────────────────────────────────────────────────────────────────────────
{{ if eq .chezmoi.os "darwin" -}}
# macOS specific
alias brewup="brew update && brew upgrade && brew cleanup"
alias flushdns="sudo dscacheutil -flushcache; sudo killall -HUP mDNSResponder"
alias showfiles="defaults write com.apple.finder AppleShowAllFiles YES; killall Finder"
alias hidefiles="defaults write com.apple.finder AppleShowAllFiles NO; killall Finder"
alias afk="pmset displaysleepnow"

{{ else if eq .chezmoi.os "linux" -}}
# Linux specific
alias open="xdg-open"
alias pbcopy="xclip -selection clipboard"
alias pbpaste="xclip -selection clipboard -o"
alias apt-up="sudo apt update && sudo apt upgrade -y && sudo apt autoremove -y"

{{ end -}}
